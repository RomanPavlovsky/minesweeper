(()=>{"use strict";var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,n){for(var o=0;o<n.length;o++){var r=n[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!==e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===e(i)?i:String(i)),r)}var i}function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==o(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var o=n.getElementsByTagName("script");if(o.length)for(var r=o.length-1;r>-1&&!e;)e=o[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();var u=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(a,t);var e,n,u,c,l=(u=a,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=s(u);if(c){var n=s(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(t=l.call(this)).settings={matrixSize:10,bombs:10,theme:"light",sound:!0,isCustom:!1,customBombs:null,customSize:null},t.state={counters:{flag:0,bomb:t.settings.bombs,time:0,action:0},matrix:null,cells:null,flags:new Set},t.isStartGame=!1,t}return e=a,(n=[{key:"loadSettings",value:function(){console.log("loader settings");var t=JSON.parse(localStorage.getItem("settings"));for(var e in t)this.settings[e]=t[e];this.state.counters.bomb=this.settings.bombs}},{key:"startTimer",value:function(){this.state.counters.time+=1,this.notify(this)}},{key:"swapTheme",value:function(){"light"===this.settings.theme?this.settings.theme="dark":this.settings.theme="light"}},{key:"setBombs",value:function(){this.settings.customBombs&&(this.settings.bombs=Number(this.settings.customBombs))}},{key:"setSize",value:function(){this.settings.customSize&&(this.settings.matrixSize=Number(this.settings.customSize))}},{key:"toggleSound",value:function(){this.settings.sound?this.settings.sound=!1:this.settings.sound=!0}},{key:"saveSettings",value:function(){localStorage.setItem("settings",JSON.stringify(this.settings))}}])&&r(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.observers=[]}var e,o;return e=t,(o=[{key:"addObserver",value:function(t){this.observers.push(t)}},{key:"removeObserver",value:function(t){var e=this.observers.findIndex((function(e){return t===e}));-1!==e&&(this.observers=this.observers.slice(e,1))}},{key:"notify",value:function(t){this.observers.length>0&&this.observers.forEach((function(e){return e.update(t)}))}}])&&n(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}());function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==c(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===c(r)?r:String(r)),o)}var r}var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.matrixSize=e,this.bombs=n,this.matrix=[],this.matrixState={},this.positionsBombs=[]}var e,n;return e=t,(n=[{key:"createMatrix",value:function(t){for(var e=this,n=0;n<this.matrixSize;n++){var o=new Array(this.matrixSize);o.fill("-"),this.matrix.push(o)}for(var r=Math.pow(this.matrixSize,2),i=function(t,e){return Math.floor(Math.random()*(t-e+1))+e};this.positionsBombs.length<this.bombs;){var s=i(r,1);s===Number(t)||this.positionsBombs.includes(s)||this.positionsBombs.push(s)}this.positionsBombs.forEach((function(t){var n=(t-1)%e.matrixSize,o=Math.floor((t-1)/e.matrixSize);e.matrix[o][n]="+"})),this.matrix.map((function(t,e,n){for(var o=0;o<t.length;o++){var r=0;"+"!==t[o]&&("+"===t[o-1]&&(r+=1),"+"===t[o+1]&&(r+=1),void 0!==n[e-1]&&("+"===n[e-1][o-1]&&(r+=1),"+"===n[e-1][o]&&(r+=1),"+"===n[e-1][o+1]&&(r+=1)),void 0!==n[e+1]&&("+"===n[e+1][o-1]&&(r+=1),"+"===n[e+1][o]&&(r+=1),"+"===n[e+1][o+1]&&(r+=1)),t[o]=r)}}))}},{key:"getCell",value:function(t,e){var n=this,o=(t-1)%this.matrixSize,r=Math.floor((t-1)/this.matrixSize);return"+"===this.matrix[r][o]?{type:"bomb",bombs:this.positionsBombs}:(0===this.matrix[r][o]?function t(o,r){var i=[],s=o*n.matrixSize+r+1;e.has("".concat(s))||(n.matrixState[s]=n.matrix[o][r],0!==o&&i.push([n.matrix[o-1][r],o-1,r]),o!==n.matrixSize-1&&i.push([n.matrix[o+1][r],o+1,r]),0!==o&&0!==r&&i.push([n.matrix[o-1][r-1],o-1,r-1]),o!==n.matrixSize-1&&0!==r&&i.push([n.matrix[o+1][r-1],o+1,r-1]),o!==n.matrixSize-1&&r!==n.matrixSize-1&&i.push([n.matrix[o+1][r+1],o+1,r+1]),0!==o&&r!==n.matrixSize-1&&i.push([n.matrix[o-1][r+1],o-1,r+1]),0!==r&&i.push([n.matrix[o][r-1],o,r-1]),r!==n.matrixSize-1&&i.push([n.matrix[o][r+1],o,r+1]),i.forEach((function(e){var o=e[1]*n.matrixSize+e[2]+1,r=Object.keys(n.matrixState);0===e[0]||r.includes(String(o))?0!==e[0]||r.includes(String(o))||t(e[1],e[2]):n.matrixState[o]=e[0]})))}(r,o):this.matrixState[t]=this.matrix[r][o],this.matrixState)}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function m(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return(e=v(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,v(o.key),o)}}function v(t){var e=function(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==f(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===f(e)?e:String(e)}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(s,t);var e,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=_(o);if(r){var n=_(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this)).isChangeMenu=!1,t.isOpenMenu=!1,t.isChangeSettings=!1,t.isOpenSettings=!1,t.isOpenCustom=!1,t.isGameOver=!1,t.isWin=!1,t.isLose=!1,t.isNewGame=!0,t.openCells=null,t.openBombs=null,t.isWaitUp=!1,t.isFlag=null,t.results=null,t}return e=s,(n=[{key:"toggleSmile",value:function(t){this.isWaitUp="mousedown"===t}},{key:"toggleMenu",value:function(){this.isChangeMenu=!0,this.isOpenSettings=!1,this.isOpenCustom=!1,this.isOpenMenu?this.isOpenMenu=!1:this.isOpenMenu=!0,this.toggleTimer(),this.notify(this),this.isChangeMenu=!1}},{key:"toggleSettings",value:function(){this.isChangeSettings=!0,this.isOpenSettings?this.isOpenSettings=!1:this.isOpenSettings=!0,this.notify(this),this.isChangeSettings=!1}},{key:"createMatrix",value:function(t){var e=this;this.matrixModel=new a(this.settings.matrixSize,this.settings.bombs),this.isStartGame?(this.matrixModel.matrix=this.state.matrix.matrix,this.matrixModel.matrixState=this.state.matrix.matrixState,this.matrixModel.positionsBombs=this.state.matrix.positionsBombs):(this.isStartGame=!0,this.matrixModel.createMatrix(t),this.state.matrix=d({},this.matrixModel),this.state.flags.forEach((function(t){e.matrixModel.positionsBombs.includes(Number(t))&&(e.state.counters.bomb-=1)})))}},{key:"openCell",value:function(t){this.state.counters.action+=1;var e=this.matrixModel.getCell(t,this.state.flags);"bomb"===e.type?(this.openBombs={id:t,bombs:m(e.bombs)},this.lose()):this.openCells=this.matrixModel.getCell(t,this.state.flags)}},{key:"putFlag",value:function(t){this.state.flags.size<this.settings.bombs&&(this.isFlag=!0,this.state.counters.flag+=1,this.state.flags.add(t),this.isStartGame&&this.matrixModel.positionsBombs.includes(Number(t))&&(this.state.counters.bomb-=1))}},{key:"downFlag",value:function(t){this.isFlag=!0,this.state.counters.flag-=1,this.state.flags.delete(t),this.isStartGame&&this.matrixModel.positionsBombs.includes(Number(t))&&(this.state.counters.bomb+=1)}},{key:"lose",value:function(){var t=this;this.isGameOver=!0,this.isLose=!0,this.toggleTimer(),setTimeout((function(){t.isGameOver=!1,t.toggleMenu()}),2e3)}},{key:"win",value:function(){var t=this;this.isGameOver=!0,this.isWin=!0,this.toggleTimer(),setTimeout((function(){t.isGameOver=!1,t.toggleMenu()}),300)}},{key:"toggleTimer",value:function(){this.isLose||this.isWin||this.isOpenMenu||!this.isStartGame?clearInterval(this.intervalId):this.intervalId=setInterval(this.startTimer.bind(this),1e3)}},{key:"checkWin",value:function(){var t=document.querySelectorAll(".unit"),e=[];t.forEach((function(t){"closed"!==t.dataset.type&&"flag"!==t.dataset.type||e.push(Number(t.id))}));var n=this.matrixModel.positionsBombs.sort((function(t,e){return t-e}));if(e.length===n.length){for(var o=0,r=0;r<e.length;r++)e[r]===n[r]&&(o+=1);o===e.length&&(this.isWin=!0,this.win(),this.notify(this),this.saveResults())}}},{key:"newGame",value:function(){this.toggleMenu(),this.state.counters.time=0,this.state.counters.flag=0,this.state.counters.bomb=this.settings.bombs,this.state.counters.action=0,this.state.matrix=null,this.state.cells=null,this.isWin=!1,this.isLose=!1,this.openCells=null,this.openBombs=null,this.isStartGame=!1,this.state.flags.clear(),this.toggleTimer(),this.isNewGame=!0,this.notify(this),this.isNewGame=!1}},{key:"saveResults",value:function(){var t=new Date,e="".concat(t.getDate(),".").concat(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,".").concat(t.getFullYear()," ").concat(t.getHours()<10?"0"+t.getHours():t.getHours(),":").concat(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes());if(localStorage.getItem("results")){var n=Object.entries(JSON.parse(localStorage.getItem("results"))),o=n.length;10===o?((n=(n=n.map((function(t){return[t[0]-1,t[1]]}))).slice(1,11)).push([10,{moves:this.state.counters.action,time:this.state.counters.action,date:e}]),localStorage.setItem("results",JSON.stringify(Object.fromEntries(n)))):(n.push([o+1,{moves:this.state.counters.action,time:this.state.counters.action,date:e}]),localStorage.setItem("results",JSON.stringify(Object.fromEntries(n))))}else{var r={1:{moves:this.state.counters.action,time:this.state.counters.action,date:e}};localStorage.setItem("results",JSON.stringify(r))}}},{key:"openResults",value:function(){localStorage.getItem("results")?this.results=Object.entries(JSON.parse(localStorage.getItem("results"))):this.results="empty"}},{key:"changeLvl",value:function(t,e){this.settings.isCustom=!1,this.settings.matrixSize=e,this.settings.bombs=t,this.settings.customSize=null,this.newGame()}},{key:"saveGame",value:function(){var t=document.querySelectorAll(".unit");if(!this.isWin&&!this.isLose&&this.isStartGame){var e={counters:{flag:this.state.counters.flag,bomb:this.state.counters.bomb,time:this.state.counters.time,action:this.state.counters.action},matrix:d({},this.state.matrix),cells:{},flags:m(this.state.flags)};t.forEach((function(t){var n=t.id;e.cells[n]={type:t.dataset.type,value:t.innerText}})),localStorage.setItem("saveGame",JSON.stringify(e))}}},{key:"loadState",value:function(){console.log("loader state"),this.state=JSON.parse(localStorage.getItem("saveGame")),this.state.flags=new Set(this.state.flags),this.isStartGame=!0,localStorage.removeItem("saveGame")}}])&&b(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(u);function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function O(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==S(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==S(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===S(r)?r:String(r)),o)}var r}var j=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=e}var e,n;return e=t,(n=[{key:"loadApp",value:function(){null!==localStorage.getItem("settings")&&this.model.loadSettings(),null!==localStorage.getItem("saveGame")&&(this.model.loadState(),this.model.createMatrix(),this.model.toggleTimer()),this.model.isNewGame&&(this.model.notify(this.model),this.model.isNewGame=!1)}}])&&O(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function k(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==P(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==P(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===P(r)?r:String(r)),o)}var r}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(s,t);var e,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(o);if(r){var n=x(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,(n=[{key:"saveGame",value:function(){this.model.saveGame()}},{key:"openCell",value:function(t){t.target.closest(".unit_closed")&&(this.model.isStartGame||(this.model.createMatrix(t.target.id),this.model.toggleTimer()),this.model.openCell(t.target.id),this.model.notify(this.model),this.model.openCells=null,this.model.checkWin())}},{key:"setFlag",value:function(t){2===t.button&&(t.target.closest(".unit_closed")?this.model.putFlag(t.target.id):t.target.closest(".unit_flag")&&this.model.downFlag(t.target.id),this.model.notify(this.model),this.model.isFlag=null)}},{key:"toggleSmile",value:function(t){t.target.closest(".unit_closed")&&2!==t.button&&(this.model.toggleSmile(t.type),this.model.notify(this.model))}}])&&k(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(j);function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function C(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==B(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==B(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===B(r)?r:String(r)),o)}var r}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}var M=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(s,t);var e,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=R(o);if(r){var n=R(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===B(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,(n=[{key:"toggleMenu",value:function(){this.model.toggleMenu()}},{key:"toggleSettings",value:function(){this.model.toggleSettings()}},{key:"newGame",value:function(){this.model.newGame(),this.model.notify(this.model)}},{key:"openResults",value:function(){this.model.openResults(),this.model.notify(this.model),this.model.results=null}}])&&C(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(j);function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function q(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==G(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==G(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===G(r)?r:String(r)),o)}var r}function A(t,e){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},A(t,e)}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}var z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(s,t);var e,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=I(o);if(r){var n=I(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===G(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function s(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),i.call(this,t)}return e=s,(n=[{key:"changeSettings",value:function(t){t.target.closest(".settings__audio")&&(this.model.toggleSound(),this.model.notify(this.model)),t.target.closest(".toggle__input")&&(this.model.swapTheme(),this.model.notify(this.model)),t.target.closest(".custom__apply")&&(this.model.setBombs(),this.model.setSize(),this.model.settings.isCustom=!0,this.model.newGame(),this.model.notify(this.model)),t.target.closest(".mines__input")&&(this.model.settings.customBombs=t.target.value,this.model.notify(this.model)),t.target.closest(".radio-size")&&(this.model.settings.customSize=t.target.value,this.model.notify(this.model)),"difficulty"===t.target.name&&(10===Number(t.target.value)&&this.model.changeLvl(10,Number(t.target.value)),15===Number(t.target.value)&&this.model.changeLvl(45,Number(t.target.value)),25===Number(t.target.value)&&this.model.changeLvl(99,Number(t.target.value)),"custom"===t.target.value&&(this.model.isOpenCustom=!0),this.model.notify(this.model))}},{key:"saveSettings",value:function(){this.model.saveSettings()}}])&&q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(j);function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function D(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==N(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==N(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===N(r)?r:String(r)),o)}var r}var H=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"update",value:function(){}}])&&D(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function W(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==F(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==F(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===F(r)?r:String(r)),o)}var r}function J(t,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},J(t,e)}function U(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V(t){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},V(t)}var $=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&J(t,e)}(s,t);var e,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=V(o);if(r){var n=V(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===F(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return U(t)}(this,t)});function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=i.call(this)).actionController=t,e.actionController.model.addObserver(U(e)),e.counters=document.querySelector(".minesweeper__counters"),e}return e=s,(n=[{key:"update",value:function(t){var e=t.state.counters[this.name],n=e>=0&&e<10?"00"+e:e>=10&&e<100?"0"+e:e>=100&&e<1e3?e:999;if(t.isNewGame){var o='<div class="'.concat(this.name,'-counter">\n      <div\n        id="').concat(this.name,'__icon"\n        class="').concat(this.name,"__icon_").concat(t.settings.theme,'"></div>\n      <div class="').concat(this.name,'__count">\n      ').concat(n,"\n      </div>\n    </div>");null!==document.querySelector(".".concat(this.name,"-counter"))&&document.querySelector(".".concat(this.name,"-counter")).remove(),this.counters.insertAdjacentHTML("beforeend",o)}else document.querySelector(".".concat(this.name,"__count")).textContent=n;this.checkTheme(t.settings.theme)}},{key:"checkTheme",value:function(t){var e=document.getElementById("".concat(this.name,"__icon"));"light"===t?(e.classList.replace("".concat(this.name,"__icon_dark"),"".concat(this.name,"__icon_light")),document.querySelector(".".concat(this.name,"__count")).style.color="#000000"):(e.classList.replace("".concat(this.name,"__icon_light"),"".concat(this.name,"__icon_dark")),document.querySelector(".".concat(this.name,"__count")).style.color="#ffffff")}}])&&W(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(H);function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function K(t,e){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},K(t,e)}function Q(t){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Q(t)}var X=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K(t,e)}(i,t);var e,n,o,r=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Q(n);if(o){var r=Q(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).name="action",e}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}($);function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function tt(t,e){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tt(t,e)}function et(t){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},et(t)}var nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tt(t,e)}(i,t);var e,n,o,r=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=et(n);if(o){var r=et(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).name="bomb",e}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}($);function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function rt(t,e){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rt(t,e)}function it(t){return it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},it(t)}var st=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rt(t,e)}(i,t);var e,n,o,r=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=it(n);if(o){var r=it(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).name="flag",e}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}($);function ut(t){return ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(t)}function ct(t,e){return ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ct(t,e)}function lt(t){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lt(t)}var at=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ct(t,e)}(i,t);var e,n,o,r=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=lt(n);if(o){var r=lt(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ut(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=r.call(this,t)).name="time",e}return e=i,Object.defineProperty(e,"prototype",{writable:!1}),e}($);function ft(t){return ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(t)}function mt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==ft(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==ft(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===ft(r)?r:String(r)),o)}var r}function pt(t,e){return pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pt(t,e)}function yt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dt(t){return dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dt(t)}var ht=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pt(t,e)}(s,t);var e,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=dt(o);if(r){var n=dt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===ft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return yt(t)}(this,t)});function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=i.call(this)).interfaceController=t,e.interfaceController.model.addObserver(yt(e)),document.body.innerHTML='<div class="minesweeper">\n    <div class="minesweeper__result"></div>\n    <div class="minesweeper__header">\n      <div class="menu">\n        <div class="menu__pause-heading">PAUSE</div>\n        <div class="menu__new-game-btn">New Game</div>\n        <div class="menu__result-btn">Results</div>\n      </div>\n      <div class="settings"></div>\n      <div class="settings-btn"></div>\n      <div id="minesweeper__menu-btn" class="minesweeper__menu-btn_normal "></div>\n      <div class="minesweeper__counters"></div>\n    </div>\n    <div class="minesweeper__minefield"></div>\n    <div class="minesweeper__menu">\n    </div>\n  </div>',e.menu=document.querySelector(".minesweeper__menu"),e.menuButton=document.querySelector("#minesweeper__menu-btn"),e.minesweeper=document.querySelector(".minesweeper"),e.resultTitle=document.querySelector(".minesweeper__result"),e.heading=document.querySelector(".menu__pause-heading"),e.minesweeper.addEventListener("contextmenu",(function(t){t.preventDefault()})),e}return e=s,(n=[{key:"update",value:function(t){this.checkTheme(t.settings.theme),this.resultTitle.classList.remove("minesweeper__result_open"),this.resultTitle.innerHTML="",t.isWin&&(this.menuButton.className="",this.menuButton.classList.add("minesweeper__menu-btn_win"),this.heading.textContent="WIN",this.resultTitle.innerHTML="Hooray! <br/> You found all mines in ".concat(t.state.counters.time," seconds <br/> and ").concat(t.state.counters.action," moves"),this.resultTitle.classList.add("minesweeper__result_open")),t.isLose&&(this.menuButton.className="",this.menuButton.classList.add("minesweeper__menu-btn_lose"),this.heading.textContent="LOSE",this.resultTitle.innerHTML="Game over. Try again",this.resultTitle.classList.add("minesweeper__result_open")),t.isLose||t.isWin||t.isWaitUp||(this.menuButton.className="",this.menuButton.classList.add("minesweeper__menu-btn_normal"),this.heading.textContent="PAUSE"),t.isWaitUp&&(this.menuButton.className="",this.menuButton.classList.add("minesweeper__menu-btn_wait"))}},{key:"checkTheme",value:function(t){"light"===t?(this.menu.style.backgroundColor="#1ecf2731",this.heading.style.color="#000000",this.resultTitle.style.color="#000000"):(this.menu.style.backgroundColor="#091b2431",this.heading.style.color="#ffffff",this.resultTitle.style.color="#ffffff")}}])&&mt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(H);function bt(t){return bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bt(t)}function vt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==bt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==bt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===bt(r)?r:String(r)),o)}var r}function gt(t,e){return gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gt(t,e)}function _t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wt(t){return wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wt(t)}var St=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gt(t,e)}(s,t);var e,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=wt(o);if(r){var n=wt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===bt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _t(t)}(this,t)});function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=i.call(this)).interfaceController=t,t.model.addObserver(_t(e)),e.menuButton=document.querySelector("#minesweeper__menu-btn"),e.menu=document.querySelector(".minesweeper__menu"),e.settingsButton=document.querySelector(".settings-btn"),e.newGameButton=document.querySelector(".menu__new-game-btn"),e.resultButton=document.querySelector(".menu__result-btn"),e.settingsMenu=document.querySelector(".settings"),e.menuHeading=document.querySelector(".menu__pause-heading"),e.menuContainer=document.querySelector(".menu"),e.toggleMenu=e.interfaceController.toggleMenu.bind(e.interfaceController),e.toggleSettings=e.interfaceController.toggleSettings.bind(e.interfaceController),e.newGame=e.interfaceController.newGame.bind(e.interfaceController),e.menuButton.addEventListener("click",e.toggleMenu),e.settingsButton.addEventListener("click",e.toggleSettings),e.newGameButton.addEventListener("click",e.newGame),e}return e=s,(n=[{key:"update",value:function(t){t.isGameOver&&this.menuButton.removeEventListener("click",this.toggleMenu),t.isGameOver&&this.menuButton.removeEventListener("click",this.toggleMenu),t.isOpenMenu&&t.isChangeMenu&&this.openMenu(),!t.isOpenMenu&&t.isChangeMenu&&this.closeMenu(),t.isOpenSettings&&t.isChangeSettings&&this.openSettings(),!t.isOpenSettings&&t.isChangeSettings&&this.closeSettings()}},{key:"openMenu",value:function(){var t=this;this.newGameButton.removeEventListener("click",this.newGame),this.menuButton.removeEventListener("click",this.toggleMenu),this.settingsMenu.classList.remove("settings_close"),this.newGameButton.classList.remove("menu__new-game-btn_close"),this.resultButton.classList.remove("menu__result-btn_close"),this.menuHeading.classList.remove("menu__pause-heading_close"),this.settingsButton.classList.remove("settings-btn_close"),this.menuContainer.style.visibility="visible",this.newGameButton.classList.add("menu__new-game-btn_open"),this.resultButton.classList.add("menu__result-btn_open"),this.menuHeading.classList.add("menu__pause-heading_open"),this.settingsButton.classList.add("settings-btn_open"),this.settingsButton.style.visibility="visible",this.menu.classList.add("minesweeper__menu_open"),setTimeout((function(){t.menuButton.addEventListener("click",t.toggleMenu),t.newGameButton.addEventListener("click",t.newGame)}),400)}},{key:"closeMenu",value:function(){this.newGameButton.removeEventListener("click",this.newGame),this.menuButton.removeEventListener("click",this.toggleMenu),document.querySelector(".custom").style.visibility="hidden",document.querySelector(".custom").classList.remove("custom_open"),this.menu.classList.remove("minesweeper__menu_open"),this.menu.classList.add("minesweeper__menu_close"),this.newGameButton.classList.add("menu__new-game-btn_close"),this.resultButton.classList.add("menu__result-btn_close"),this.menuHeading.classList.add("menu__pause-heading_close"),this.settingsButton.classList.add("settings-btn_close"),this.settingsMenu.classList.add("settings_close"),this.menu.classList.remove("minesweeper__menu_close"),this.menuButton.addEventListener("click",this.toggleMenu),this.newGameButton.addEventListener("click",this.newGame),this.menuContainer.style.visibility="hidden",this.settingsButton.classList.remove("settings-btn_close"),this.settingsButton.classList.remove("settings-btn_open"),this.newGameButton.classList.remove("menu__new-game-btn_open"),this.resultButton.classList.remove("menu__result-btn_open"),this.menuHeading.classList.remove("menu__pause-heading_open"),this.settingsMenu.style.visibility="hidden",this.settingsButton.style.visibility="hidden",this.settingsButton.classList.remove("settings-btn_left"),this.settingsButton.classList.remove("settings-btn_right")}},{key:"openSettings",value:function(){var t=this;this.settingsButton.removeEventListener("click",this.toggleSettings),document.querySelectorAll(".radio-checkbox__input").forEach((function(t){t.checked&&"custom"===t.value&&(document.querySelector(".custom").style.visibility="visible",document.querySelector(".custom").classList.add("custom_open"))})),document.querySelector(".toggle").style.display="block",this.menuContainer.classList.add("menu_left"),this.settingsButton.classList.remove("settings-btn_right"),this.settingsButton.classList.add("settings-btn_left"),this.settingsMenu.style.visibility="visible",this.settingsMenu.classList.add("settings_left"),setTimeout((function(){t.menuContainer.style.visibility="hidden",t.settingsMenu.classList.remove("settings_left"),t.menuContainer.classList.remove("menu_left"),t.settingsButton.addEventListener("click",t.toggleSettings)}),300)}},{key:"closeSettings",value:function(){var t=this;this.settingsButton.removeEventListener("click",this.toggleSettings),document.querySelector(".custom").style.visibility="hidden",document.querySelector(".custom").classList.remove("custom_open"),this.menuContainer.style.visibility="visible",this.menuContainer.classList.add("menu_right"),this.settingsButton.classList.remove("settings-btn_left"),this.settingsButton.classList.add("settings-btn_right"),this.settingsMenu.classList.add("settings_right"),setTimeout((function(){document.querySelector(".toggle").style.display="none",t.settingsMenu.style.visibility="hidden",t.menuContainer.classList.remove("menu_right"),t.settingsMenu.classList.remove("settings_right"),t.settingsButton.addEventListener("click",t.toggleSettings)}),300)}}])&&vt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(H);function Ot(t){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ot(t)}function jt(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==Ot(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==Ot(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===Ot(r)?r:String(r)),o)}var r}function Pt(t,e){return Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pt(t,e)}function kt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Et(t){return Et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Et(t)}var xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pt(t,e)}(s,t);var e,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Et(o);if(r){var n=Et(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return kt(t)}(this,t)});function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=i.call(this)).minefield=document.querySelector(".minesweeper__minefield"),e.actionController=t,e.actionController.model.addObserver(kt(e)),e.openCell=e.actionController.openCell.bind(e.actionController),e.setFlag=e.actionController.setFlag.bind(e.actionController),e.saveGame=e.actionController.saveGame.bind(e.actionController),e.toggleSmile=e.actionController.toggleSmile.bind(e.actionController),window.addEventListener("beforeunload",e.saveGame),e}return e=s,(n=[{key:"update",value:function(t){var e=this,n=t.settings.matrixSize;t.isNewGame&&(this.explosion(t.openBombs),this.minefield.innerHTML="",this.minefield.addEventListener("click",this.openCell),this.minefield.addEventListener("mouseup",this.setFlag),this.minefield.addEventListener("mousedown",this.toggleSmile),this.minefield.addEventListener("mouseup",this.toggleSmile),this.minefield.style["grid-template-columns"]="repeat(".concat(n,", 1fr)"),this.minefield.style["grid-template-rows"]="repeat(".concat(n,", 1fr)"),t.isStartGame||this.fillMinefield(n),t.isStartGame&&this.loadMinefield(t.state.cells)),t.isGameOver&&this.explosion(t.openBombs),(t.isWin||t.isLose)&&(this.minefield.removeEventListener("click",this.openCell),this.minefield.removeEventListener("mouseup",this.setFlag),this.minefield.removeEventListener("mousedown",this.toggleSmile),this.minefield.removeEventListener("mouseup",this.toggleSmile)),t.openCells&&Object.entries(t.openCells).forEach((function(t){var n=document.getElementById(t[0]);0===t[1]?"flag"!==n.dataset.type&&e.renderCell(t[0],"empty"):"flag"!==n.dataset.type&&e.renderCell(t[0],"value",t[1])})),document.querySelectorAll(".unit").forEach((function(n){t.state.flags&&(t.state.flags.has(n.id)?e.putFlag(n.id):"flag"===n.dataset.type&&e.downFlag(n.id))}))}},{key:"fillMinefield",value:function(t){for(var e=1;e<=Math.pow(t,2);e++){var n='<div class="unit unit_closed" data-type="closed" id="'.concat(e,'"></div>');this.minefield.insertAdjacentHTML("beforeend",n)}}},{key:"setColor",value:function(t,e){document.getElementById(t).style.color=["#ffffff","#1ce226","#ffbb00","#006eff","#800080","#ff0000","#00573d","#611212"][e-1]}},{key:"explosion",value:function(t){var e=this,n=0;null===t?(clearInterval(this.renderBombs),n=0):(document.getElementById(t.id).classList.add("unit_fail-bomb"),this.minefield.classList.add("snake"),this.renderBombs=setInterval((function(){t.bombs[n]!==Number(t.id)&&document.getElementById(t.bombs[n]).classList.add("unit_bomb"),(n+=1)===t.bombs.length&&(clearInterval(e.renderBombs),n=0)}),100))}},{key:"renderCell",value:function(t,e,n){document.getElementById(t).classList.remove("unit_closed"),"empty"===e?(document.getElementById(t).classList.add("unit_empty"),document.getElementById(t).dataset.type="empty"):"value"===e&&(document.getElementById(t).classList.add("unit_value"),document.getElementById(t).textContent=n,document.getElementById(t).dataset.type="value",this.setColor(t,n))}},{key:"putFlag",value:function(t){document.getElementById(t).classList.replace("unit_closed","unit_flag"),document.getElementById(t).dataset.type="flag"}},{key:"downFlag",value:function(t){document.getElementById(t).classList.replace("unit_flag","unit_closed"),document.getElementById(t).dataset.type="closed"}},{key:"loadMinefield",value:function(t){for(var e in t){var n='<div class="unit unit_'.concat(t[e].type,'" data-type="').concat(t[e].type,'" id="').concat(e,'">').concat(t[e].value,"</div>");this.minefield.insertAdjacentHTML("beforeend",n),""!==t[e].value&&this.setColor(e,Number(t[e].value))}}}])&&jt(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(H);function Lt(t){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(t)}function Bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function Ct(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==Lt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==Lt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===Lt(r)?r:String(r)),o)}var r}function Tt(t,e){return Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Tt(t,e)}function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mt(t){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mt(t)}var Gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tt(t,e)}(s,t);var e,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Mt(o);if(r){var n=Mt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Lt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Rt(t)}(this,t)});function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=i.call(this)).settingsController=t,e.settingsController.model.addObserver(Rt(e)),e.menu=document.querySelector(".minesweeper__menu"),e.settingsMenu=document.querySelector(".settings"),e}return e=s,(n=[{key:"update",value:function(t){t.isNewGame&&this.renderSettings(t.settings),this.checkTheme(t.settings),t.isOpenSettings&&(t.isOpenCustom||t.settings.isCustom)&&(document.querySelector(".custom").style.visibility="visible",document.querySelector(".custom").classList.add("custom_open")),this.renderLvl(t),this.renderMines()}},{key:"checkTheme",value:function(t){"light"===t.theme&&(this.settingsMenu.style.color="#000000",t.sound?(this.audioButton.classList.remove("settings__audio_on_dark"),this.audioButton.classList.remove("settings__audio_off_dark"),this.audioButton.classList.remove("settings__audio_off_light"),this.audioButton.classList.add("settings__audio_on_light")):(this.audioButton.classList.remove("settings__audio_on_dark"),this.audioButton.classList.remove("settings__audio_on_light"),this.audioButton.classList.remove("settings__audio_off_dark"),this.audioButton.classList.add("settings__audio_off_light"))),"dark"===t.theme&&(this.settingsMenu.style.color="#ffffff",t.sound?(this.audioButton.classList.remove("settings__audio_on_light"),this.audioButton.classList.remove("settings__audio_off_light"),this.audioButton.classList.remove("settings__audio_off_dark"),this.audioButton.classList.add("settings__audio_on_dark")):(this.audioButton.classList.remove("settings__audio_on_light"),this.audioButton.classList.remove("settings__audio_off_light"),this.audioButton.classList.remove("settings__audio_on_dark"),this.audioButton.classList.add("settings__audio_off_dark")))}},{key:"renderLvl",value:function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Bt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw i}}}}(document.querySelectorAll(".radio-checkbox__input"));try{for(n.s();!(e=n.n()).done;){var o=e.value;"custom"===o.value&&(t.isOpenCustom||t.settings.isCustom)&&(o.checked="checked"),"difficulty"===o.name&&t.settings.matrixSize===Number(o.value)&&(t.isOpenCustom||t.settings.isCustom||(o.checked="checked")),"minefield"===o.name&&(t.settings.customSize?o.value===t.settings.customSize&&(o.checked="checked"):Number(o.value)===t.settings.matrixSize&&(o.checked="checked"))}}catch(t){n.e(t)}finally{n.f()}}},{key:"renderMines",value:function(){var t=document.querySelector(".mines__input");document.querySelector(".mines__progress").style.width=t.value+"%",document.querySelector(".mines__heading").textContent="Mines: ".concat(t.value)}},{key:"renderSettings",value:function(t){document.querySelector(".settings").innerHTML='<div class="settings__heading">SETTINGS</div>\n    <div class="settings__theme">\n      <div class="heading">Theme</div>\n      <label class="toggle" for="theme">\n        <input class="toggle__input" type="checkbox" name="theme" id="theme" '.concat("dark"===t.theme?"checked":null,'/>\n        <span class="toggle__custom"></span>\n      </label>\n    </div>\n    <div class="settings__audio settings__audio_').concat(t.sound?"on":"off","_").concat(t.theme,'" ></div>\n    <div class="settings__difficulty-level">\n      <div class="heading">Difficulty level:</div>\n      <div class="radio-lvl radio">\n        <label class="radio-checkbox tooltip">\n          <span class="tooltip__text">Size:10x10 Mines:10</span>\n          <input class="radio-checkbox__input" type="radio" name="difficulty" value="10" checked="checked" />\n          <span class="radio-checkbox__custom"></span>\n          Easy\n        </label>\n        <label class="radio-checkbox tooltip">\n          <span class="tooltip__text">Size:15x15 Mines:45</span>\n          <input class="radio-checkbox__input" type="radio" name="difficulty" value="15" />\n          <span class="radio-checkbox__custom"></span>\n          Medium\n        </label>\n        <label class="radio-checkbox tooltip">\n          <span class="tooltip__text">Size:25x25 Mines:99</span>\n          <input class="radio-checkbox__input" type="radio" name="difficulty" value="25" />\n          <span class="radio-checkbox__custom"></span>\n          Hard\n        </label>\n        <label class="radio-checkbox tooltip">\n          <span class="tooltip__text">Custom settings</span>\n          <input class="radio-checkbox__input" type="radio" name="difficulty" value="custom" />\n          <span class="radio-checkbox__custom"></span>\n          Custom\n        </label>\n      </div>\n    </div>\n    <div class="custom">\n      <div class="custom__mines">\n        <div class="mines__heading">Mines: ').concat(t.bombs,'</div>\n        <div class="mines">\n          <div class="mines__line"></div>\n          <input class="mines__input" type="range" min="10" max="99" value="').concat(t.bombs,'" step="1" />\n          <div class="mines__progress"></div>\n        </div>\n      </div>\n      <div class="custom__size">\n        <div class="heading">Minefield size:</div>\n        <div class="radio-size radio">\n          <label class="radio-checkbox">\n            <input class="radio-checkbox__input" type="radio" name="minefield" value="10" />\n            <span class="radio-checkbox__custom"></span> 10\n          </label>\n          <label class="radio-checkbox">\n            <input class="radio-checkbox__input" type="radio" name="minefield" value="15" />\n            <span class="radio-checkbox__custom"></span> 15\n          </label>\n          <label class="radio-checkbox">\n            <input class="radio-checkbox__input" type="radio" name="minefield" value="25" />\n            <span class="radio-checkbox__custom"></span> 25\n          </label>\n        </div>\n      </div>\n      <div class=\'custom__apply\'>Apply</div>\n    </div>'),this.themeToggle=document.querySelector(".toggle__input"),this.gameLvl=document.querySelector(".radio-lvl"),this.minefieldCustomSize=document.querySelector(".radio-size"),this.inputBombs=document.querySelector(".mines__input"),this.inputProgress=document.querySelector(".mines__progress"),this.audioButton=document.querySelector(".settings__audio"),this.applyCustom=document.querySelector(".custom__apply"),this.changeSettings=this.settingsController.changeSettings.bind(this.settingsController),this.saveSettings=this.settingsController.saveSettings.bind(this.settingsController),this.themeToggle.addEventListener("click",this.changeSettings),this.gameLvl.addEventListener("click",this.changeSettings),this.applyCustom.addEventListener("click",this.changeSettings),this.inputBombs.addEventListener("input",this.changeSettings),this.minefieldCustomSize.addEventListener("click",this.changeSettings),this.audioButton.addEventListener("click",this.changeSettings),window.addEventListener("beforeunload",this.saveSettings)}}])&&Ct(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(H);const qt=t.p+"assets/25bf91cb5cc8a1635303.mp3",At=t.p+"assets/700392f9e483f1706dcd.mp3",It=t.p+"assets/245089657ee1a52d1119.mp3",zt=t.p+"assets/3727efa402f913d35b03.mp3",Nt=t.p+"assets/967692a3077386664204.mp3";function Dt(t){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function Ht(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==Dt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==Dt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===Dt(r)?r:String(r)),o)}var r}function Ft(t,e){return Ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ft(t,e)}function Wt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jt(t){return Jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jt(t)}var Ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ft(t,e)}(s,t);var e,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Jt(o);if(r){var n=Jt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Dt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Wt(t)}(this,t)});function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=i.call(this)).interfaceController=t,e.interfaceController.model.addObserver(Wt(e)),e.openAudio=new Audio,e.openAudio.src=qt,e.flagAudio=new Audio,e.flagAudio.src=At,e.winAudio=new Audio,e.winAudio.src=It,e.bombAudio=new Audio,e.bombAudio.src=zt,e.loseAudio=new Audio,e.loseAudio.src=Nt,e.sounds=[e.openAudio,e.flagAudio,e.winAudio,e.loseAudio,e.bombAudio],e}return e=s,(n=[{key:"update",value:function(t){t.isNewGame&&this.stopPlay(),t.isGameOver&&t.isLose&&this.bombAudio.play(),t.isGameOver&&t.isWin&&this.winAudio.play(),t.isGameOver&&t.isLose&&this.loseAudio.play(),null===t.openCells||t.isLose||this.openAudio.play(),t.isFlag&&this.flagAudio.play(),t.settings.sound&&this.unmuted(),t.settings.sound||this.muted()}},{key:"stopPlay",value:function(){this.sounds.forEach((function(t){t.pause(),t.currentTime=0}))}},{key:"muted",value:function(){this.sounds.forEach((function(t){t.muted=!0}))}},{key:"unmuted",value:function(){this.sounds.forEach((function(t){t.muted=!1}))}}])&&Ht(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(H);function Vt(t){return Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vt(t)}function $t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==Vt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==Vt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===Vt(r)?r:String(r)),o)}var r}function Yt(t,e){return Yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yt(t,e)}function Kt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qt(t){return Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qt(t)}var Xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yt(t,e)}(s,t);var e,n,o,r,i=(o=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Qt(o);if(r){var n=Qt(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Vt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Kt(t)}(this,t)});function s(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),(e=i.call(this)).interfaceController=t,e.interfaceController.model.addObserver(Kt(e)),e.resultButton=document.querySelector(".menu__result-btn"),e.menu=document.querySelector(".minesweeper__menu"),e.openResults=e.interfaceController.openResults.bind(e.interfaceController),e.resultButton.addEventListener("click",e.openResults),e}return e=s,(n=[{key:"update",value:function(t){t.results&&("empty"===t.results?this.result.innerHTML='\n        <div class="result__close-btn"></div>\n        <div class="result__empty">\n            haven\'t results :( </br>\n            try to win\n        </div>':(document.querySelector(".minesweeper__header").insertAdjacentHTML("beforeend",'<div class="result"></div>'),this.result=document.querySelector(".result"),this.result.classList.remove("result_close"),this.result.classList.add("result_open"),this.result.innerHTML="\n      <div class=\"result__close-btn\"></div>\n      <div class=\"result__heading\">Last 10 wins:</div>\n        <div class=\"result__container\">\n        <div class='result__date'>Date:</div>\n                        <div class='result__count'>Moves:</div>\n                          <div class='result__time'>Time:</div>\n        </div>",t.results.forEach((function(t){var e="<div class='result__date'>".concat(t[1].date,"</div>\n                          <div class='result__count'>").concat(t[1].moves,"</div>\n                            <div class='result__time'>").concat(t[1].time,"</div>");document.querySelector(".result__container").insertAdjacentHTML("beforeend",e)}))),this.closeResults=this.closeResults.bind(this),this.menu.addEventListener("click",this.closeResults),document.querySelector(".result__close-btn").addEventListener("click",this.closeResults))}},{key:"closeResults",value:function(){var t=this;this.menu.removeEventListener("click",this.closeResults),document.querySelector(".result__close-btn").removeEventListener("click",this.closeResults),this.result.classList.remove("result_open"),this.result.classList.add("result_close"),setTimeout((function(){t.result.remove()}),200)}}])&&$t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),s}(H);function Zt(t){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(t)}function te(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,r=function(t,e){if("object"!==Zt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==Zt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===Zt(r)?r:String(r)),o)}var r}(new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stateModel=new u,this.gameModel=new w,this.loaderController=new j(this.gameModel),this.actionController=new L(this.gameModel),this.interfaceController=new M(this.gameModel),this.settingsController=new z(this.gameModel),this.layoutView=new ht(this.interfaceController),this.minefieldView=new xt(this.actionController),this.settingsView=new Gt(this.settingsController),this.menuView=new St(this.interfaceController),this.soundView=new Ut(this.interfaceController),this.flagCounter=new st(this.actionController),this.bombCounter=new nt(this.actionController),this.actionCounter=new X(this.actionController),this.timeCounter=new at(this.actionController),this.resultView=new Xt(this.interfaceController)}var e,n;return e=t,(n=[{key:"start",value:function(){this.loaderController.loadApp()}}])&&te(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}())).start()})();
//# sourceMappingURL=index.39b84766e4c5c3a2bc65.js.map